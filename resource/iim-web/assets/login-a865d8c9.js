import{b as k,aU as I,cb as S,a2 as C,r as N,d as D,e as _,f as j,h as R,w as n,j as i,i as t,c as s,aX as b,H as h,C as c,a$ as q,t as K,cc as M,cd as V,x as $,y as A,ce as T,cf as U}from"./index-7540fc5d.js";import{S as B}from"./auth-7e0a8ef8.js";const z="iim",E="1.1.2",F="electron/main.js",H={dev:"vite --mode development",build:"vite build","build:dev":"vite build --mode development",preview:"vite preview",electron:"wait-on tcp:5174 && cross-env NODE_ENV=development PROT=5174 electron .","electron:dev":'concurrently -k "npm run dev" "npm run electron"',"electron:build":"vite build --mode electron && electron-builder --mac && electron-builder --win --x64","electron:build-mac":"vite build --mode electron && electron-builder --mac","electron:build-win":"vite build --mode electron && electron-builder --win --x64"},L={"@highlightjs/vue-plugin":"^2.1.0","@kangc/v-md-editor":"^2.3.15","@vueup/vue-quill":"^1.2.0",axios:"^0.26.0","highlight.js":"^11.5.0","js-audio-recorder":"^1.0.7",pinia:"^2.0.35","pinia-plugin-persistedstate":"^3.1.0",quill:"^1.3.7","quill-image-uploader":"^1.3.0","quill-mention":"^3.2.0",vue:"^3.3.2","vue-cropper":"^1.0.8","vue-router":"^4.1.6","vue-tsc":"^1.6.4","vue-virtual-scroll-list":"^2.3.5","vue-virtual-scroller":"^2.0.0-beta.8",vuedraggable:"^4.1.0",xgplayer:"^3.0.4"},O={"@icon-park/vue-next":"^1.4.2","@tsconfig/node18":"^2.0.1","@types/vue":"^2.0.0","@vitejs/plugin-vue":"^4.1.0","@vitejs/plugin-vue-jsx":"^3.0.1","@vue/tsconfig":"^0.4.0",concurrently:"^7.3.0","cross-env":"^7.0.3",electron:"^19.1.9","electron-builder":"^23.6.0",less:"^4.1.2","less-loader":"^10.2.0","naive-ui":"^2.34.4",typescript:"^5.0.4",vite:"^4.3.2","vite-plugin-compression":"^0.5.1","wait-on":"^6.0.1"},P={appId:"ai.iim",productName:"IIM",copyright:"Copyright © 2023-2024 IIM",mac:{category:"public.app-category.utilities",icon:"build/icons/iim-mac.png"},win:{icon:"build/icons/iim-mac.png",target:[{target:"nsis"}]},nsis:{oneClick:!1,allowToChangeInstallationDirectory:!0,installerIcon:"build/icons/iim-win.ico",uninstallerIcon:"build/icons/iim-win.ico",installerHeaderIcon:"build/icons/iim-win.ico",createDesktopShortcut:!0,createStartMenuShortcut:!0,shortcutName:"iim-icon"},files:["dist/**/*","electron/**/*"],directories:{buildResources:"assets",output:"dist_electron"}},X={name:z,private:!0,version:E,main:F,scripts:H,dependencies:L,devDependencies:O,build:P};const v=r=>($("data-v-8d8e81cc"),r=r(),A(),r),G={class:"el-container is-vertical login-box login"},J=v(()=>t("header",{class:"el-header box-header"},[t("i",{class:"login-box-logo"}),c(" 欢迎回来 ")],-1)),Q={class:"el-main",style:{padding:"3px"}},W={class:"helper"},Y={class:"copyright"},Z={href:"https://github.com/iimeta/iim-client",target:"_blank"},ee=v(()=>t("br",null,null,-1)),te=v(()=>t("span",null,"Copyright © 2023-2024 IIM. All Rights Reserved.",-1)),oe={__name:"login",setup(r){const f=I(),w=S(),u=C(),m=N(),y={username:{required:!0,trigger:["blur","input"],message:"账号不能为空"},password:{required:!0,trigger:["blur","input"],message:"密码不能为空"}},o=D({username:"",password:"",loading:!1}),x=()=>{o.loading=!0;const l=B({account:o.username,password:o.password,platform:"web"});l.then(async e=>{e.code==200?(window.$message.success("登录成功"),T(e.data.access_token,e.data.expires_in),U.connect(),f.loadSetting(),u.push(w.query.redirect||"/")):window.$message.warning(e.message)}),l.finally(()=>{o.loading=!1})},d=l=>{l.preventDefault(),V(!0),m.value.validate(e=>{!e&&x()})};return(l,e)=>{const g=_("n-input"),p=_("n-button");return j(),R(i(M),{theme:null},{default:n(()=>[t("section",G,[J,t("main",Q,[s(i(q),{ref_key:"formRef",ref:m,size:"large",model:o,rules:y},{default:n(()=>[s(i(b),{path:"username","show-label":!1},{default:n(()=>[s(g,{placeholder:"邮箱/手机号",value:o.username,"onUpdate:value":e[0]||(e[0]=a=>o.username=a),onKeydown:h(d,["enter","native"])},null,8,["value","onKeydown"])]),_:1}),s(i(b),{path:"password","show-label":!1},{default:n(()=>[s(g,{placeholder:"请输入密码",type:"password","show-password-on":"click",value:o.password,"onUpdate:value":e[1]||(e[1]=a=>o.password=a),onKeydown:h(d,["enter","native"])},null,8,["value","onKeydown"])]),_:1}),s(p,{type:"primary",size:"large",block:"",class:"mt-t20",onClick:d,loading:o.loading},{default:n(()=>[c(" 立即登录 ")]),_:1},8,["loading"])]),_:1},8,["model"]),t("div",W,[s(p,{text:"",color:"#D4A978",onClick:e[2]||(e[2]=a=>i(u).push("/auth/forget"))},{default:n(()=>[c(" 找回密码 ")]),_:1}),s(p,{text:"",color:"#D4A978",onClick:e[3]||(e[3]=a=>i(u).push("/auth/register"))},{default:n(()=>[c(" 还没有账号？立即注册 ")]),_:1})]),t("div",Y,[t("a",Z,[t("span",null,[t("b",null,"v"+K(i(X).version),1)])]),ee,te])])])]),_:1})}}},ie=k(oe,[["__scopeId","data-v-8d8e81cc"]]);export{ie as default};
